{% extends 'parkmap/base.html' %}
			{% block title %}Explore Parks and Green Spaces in the Boston Metro Area{% endblock %} 

{% block meta %}
		<meta name="description" content="{% block meta_description %}{% endblock %}" >
		<meta name="keywords" content="{% block meta_keywords %}{% endblock %} " >
{% endblock %}		

{% block headscripts %}
        <link href='http://fonts.googleapis.com/css?family=Cabin' rel='stylesheet' type='text/css'> 

		<link rel="stylesheet" href="{{ STATIC_URL }}libs/bootstrap/css/bootstrap.min.css">
		<link rel="stylesheet" href="{{ STATIC_URL }}css/main.css">

		<style type="text/css" title="text/css">
		@media (max-width: 480px) {
		  body.home .well {
		  background-color: transparent; 
		  padding: 0;
		  } 
		  body.home .menu-box-inner {
		  padding: 0px 20px;
		  } 
		  body.home .menu-box {
		  padding: 0;
		  }  
		  body.home {
		  padding: 0;
		  } 
		  body.home .container-fluid { 
		  padding: 10px;
		  }
		  body.home .menu-box-item
		  {
		  padding: 10px;
		  }
		  body.home .menu-box-item form
		  {
		  margin-bottom: 4px;
		  }
		  h1 {
			font-size: 24px;
			line-height: 26px;
		  }
		}
		
		</style>
{% endblock %}

</head>

{% block bodyclass %}<body class="home">{% endblock %} 	
{% block topnav %}{% endblock %}

{% block content %} 
<div id="map_canvas" class="hidden-phone"></div>


<div class="container-fluid middle">
 <div class="row-fluid show-grid">
<div class="span12 middle">
<div class="well menu-box clearfix">
<div class="menu-box opacity">&nbsp;</div>
	<div class="menu-box-inner">
	<div class="menu-box-item">
	    <h1> Find a Green Space</h1>
	    <form method="get" action="">
			<select id='neighborhood_only' name='town'>
				<option SELECTED VALUE="">Select Your Neighborhood/Town</option>
				{% for neighborhood in neighborhoods %}
					<option value="{{neighborhood.slug}}">{{neighborhood.name}}</option>
				{% endfor %}
			</select>
			<noscript><input type="submit" value="Submit"></noscript>
			</form>
	    
	</div>
	
	
	<div class="menu-box-item">
		<h1>Play!</h1>
		<h4>Browse parks and facilities by activity</h4>
	        <form method="get" action="">
		    <select id='neighborhood_activity' name='town'>
		        <option SELECTED value="----">Select Your Activity</option>

		        {% for activity in activities %}
		    	<option value="{{activity.slug}}">{{activity.name}}</option>
		        {% endfor %}
		    </select>
		    
		    <select name='town' id='neighborhood_neighborhood'>
		    	<option SELECTED VALUE="----">Select Your Neighborhood/Town</option>
		    	{% for neighborhood in neighborhoods %}
		    		<option value="{{neighborhood.slug}}">{{neighborhood.name}}</option>
		    	{% endfor %}				
		    </select>
		    
		    
		    <noscript><input type="submit" value="Submit"></noscript>
		</form>
		
		
	  </div>
	    
	  <a href="/explore/">
	  <div class="menu-box-item">
			<h1>Explore the Map</h1>
	    </div>
	  </a>
	  
	  <a href="/plan/">	  
	     <div class="menu-box-item">
			<h1>Plan a Trip</h1>
			<h4>By Bike or Preplanned Routes</h4>
	    </div>
	    </a>
	

	</div>
	</div>
</div>

</div>
</div>
{% endblock %}	
{% block javascript %}
    {{ block.super }}
    <script type="text/javascript">

        bp.parkfilter = {
            "area__gt": "10000"
        }

        $(document).ready(function () {

           $('#neighborhood_only').change(function() {
              window.location = ("/neighborhood/"+$(this).val()+"/");
            }); 


           $('#neighborhood_activity').change(function() {
               update_select($(this).val());
           }); 
           $('#neighborhood_neighborhood').change(function() {
               if ($(this).val() != "----"  && $('#neighborhood_activity').val() != "----"){
                  window.location = ("/neighborhood/"+$(this).val()+"/"+$("#neighborhood_activity").val()+"/");
               }

           }); 

        });
        function update_select(activity){
             var out = '<option SELECTED VALUE="----">Select Your Neighborhood/Town</option>';
             $.ajax({
                 url:'/api/v1/neighborhood/?format=json&activity='+activity,
                 dataType:'json',
                 success:function(json){
                     $.each(json['objects'], function(key, obj) {
        out+= '<option value="'+obj['slug']+'">' +obj['name']+'</option>';
                     });
                     $("#neighborhood_neighborhood").html(out);
                     $("#neighborhood_neighborhood").selectedIndex = 0;
                 }
             });
        }

    </script>
	{% endblock %}

</body>
</html>

