{% extends 'parkmap/base.html' %}
{% block title %}{% endblock %}
{% block meta %}{% endblock %}

{% block bodyclass %} 
<body class="explore">
{% endblock %}
{% block content %} 
<div id="map_canvas" class="hidden-phone"></div>
<div class="container-fluid middle">
  <div class="row-fluid show-grid bpa-draggable">
  <div class="span12">
    <div class="well menu-box clearfix">
    <div class="menu-box opacity">
  <span id="maximizer"><i id="bpashowimg" class="bpa-hide icon-resize-full icon-white"></i>&nbsp;&nbsp;Maximize&nbsp;Window</span>
    </div>
    <div class="menu-box-inner bpa-hideable">
      <div class="menu-box-item">
      <form method="get" action="">
        <select id='neighborhood_neighborhood'>
        <option SELECTED value="">Select Your Neighborhood/Town</option>
         {% for neighborhood in neighborhoods %}<option 
         {% ifequal neighborhoodpassed neighborhood %} SELECTED=SELECTED{% endifequal %} 
         value="{{neighborhood.id}}">{{neighborhood.name}}</option>
         {% endfor %}
        </select>
        <select id='neighborhood_parktype' name="neighborhood_parktype">
        <option SELECTED value="">Select Your Park Type</option> 
         {% for parktype in parktypes%}<option value="{{parktype.id}}">{{parktype.name}}</option>
         {% endfor %}
        </select>
        <div id="activity_checkboxes"></div>
      </form>
      <div id="parklist"></div>
      <br>
      <div id="facilitylist"></div>
  <span id="minimizer"><i id="bpahideimg" class="bpa-hide icon-resize-small"></i>&nbsp;&nbsp;Minimize&nbsp;Window</span>
      </div>
    </div>
    </div>
  </div>
  </div>
</div>
{% endblock %} 

{% block javascript %}
    {{ block.super }}
    <script type="text/javascript">

        bp.mapconf = {
            "zoomtoparks": true
        }

        $(document).ready(function(){
          $('#neighborhood_neighborhood').bind("keypress change",(function() {

            if ($(this).val() == "") {
              $("#activity_checkboxes").html("");
            } else {
              bp.update_second_dropdown('parktype', 'neighborhood', $(this).val(),'id');
            }

          }));
          $('#neighborhood_parktype').bind("keypress change",(function() {

            if ($("#neighborhood_neighborhood").val() != "" && $('#neighborhood_parktype').val() != "") {
              bp.explore_filter_activities($("#neighborhood_neighborhood").val(),$("#neighborhood_parktype").val());
            } else {
              $("#activity_checkboxes").html("");
            }
          }));

            $('.activity_checkbox').live('change', function(){
              bp.explore_filter_parkactivities();
            });
            {% if neighborhoodpassed %}
                 bp.update_second_dropdown('parktype', 'neighborhood', '{{neighborhoodpassed.id}}','id');
            {% endif %}

        });
    
    </script>
{% endblock %}
